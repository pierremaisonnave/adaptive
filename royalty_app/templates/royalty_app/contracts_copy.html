
{% extends "royalty_app/layout.html" %}
{% block content %}



      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom" >
        <h1 class="h2">Contracts </h1>
      </div>
  
  <!------------------------------------------------------------------------------------->   
  <!---------------------------Form for new Contracts------------------------------------> 
  <form   id="form_new" > 
    <table>
      <tr>
        <td style="width: 140px">
          <span style="width: 100%; margin-left:5px;">New Contract:</span>
        </td>
      </tr>
      <tr>
        <td ><span style="width: 100%; margin-left:5px;">accounting:</span></td>
        <td > <!--Name-->
          <input type="text" id="contract_name_new" placeholder="Contract Name"  maxlength="50" style="width: 100%; margin-left:5px;">
        </td>
        <td>
          <!--M3 Brand list-->
          <div style="width: 100%; margin-left:5px;">
            {% if m3_brand_list %}
              <div  class="comboTreeInputWrapper" dd_id="m3_brand_new">
                <input type="text"   class="justAnInputBox comboTreeInputBox" placeholder="Brand Code" readonly dd_id="m3_brand_new" id="displayed_item_name_m3_brand_new" >
                <input type="text"   hidden id="hidden_item_code_m3_brand_new">
              </div>
              <div  class="comboTreeDropDownContainer" id="dropdown_m3_brand_new" style="display: none;">
                <input  type="text" class="multiplesFilter" placeholder="Type to filter" dd_id="m3_brand_new" >
                  <ul  >
                    {% for brand in m3_brand_list %}
                      <li style="display: block;" class="item_single_select" dd_id="m3_brand_new">
                        <span hidden>{{ brand.id }}</span><span hidden> : </span><span>{{ brand.brand_name }}</span>
                      </li>
                    {% endfor %}
                  </ul>
              </div>
            {% else %}
              <input type="text" readonly placeholder="Brand: Empty"  style="width:100%" title="please insert brands in static data tab" id="displayed_item_name_m3_brand_new" >
              <input type="text"   hidden id="hidden_item_code_m3_brand_new">
            {% endif %}
          </div>
        </td>
        <td>
          <!--Gald Div list-->
          <div style="width: 100%; margin-left:5px;">
            {% if division_list %}
              <div  class="comboTreeInputWrapper" dd_id="division_new">
                <input type="text"   class="justAnInputBox comboTreeInputBox" placeholder="Division" readonly dd_id="division_new" id="displayed_item_name_division_new" >
                <input type="text"   hidden id="hidden_item_code_division_new">
              </div>
              <div  class="comboTreeDropDownContainer" id="dropdown_division_new" style="display: none;">
                <input  type="text" class="multiplesFilter" placeholder="Type to filter" dd_id="division_new" >
                  <ul  >
                    {% for division in division_list %}
                      <li style="display: block;" class="item_single_select" dd_id="division_new">
                        <span >{{ division.division_id }}</span><span > : </span><span>{{ division.division_name }}</span>
                      </li>
                    {% endfor %}
                  </ul>
              </div>
            {% else %}
              <input type="text" readonly placeholder="Division: Empty"  style="width:100%" title="please insert Divisions in static data tab" id="displayed_item_name_division_new">
              <input type="text"   hidden id="hidden_item_code_division_new">
              {% endif %}
          </div>

        </td>
        <td>
          <!-- Div via-->
          <div style="width: 100%; margin-left:5px; display: None;">
            {% if division_list %}
              <div  class="comboTreeInputWrapper" dd_id="division_via_new">
                <input type="text"   class="justAnInputBox comboTreeInputBox" placeholder="pass-through division" readonly dd_id="division_via_new" id="displayed_item_name_division_via_new" >
                <input type="text"   hidden id="hidden_item_code_division_via_new">
              </div>
              <div  class="comboTreeDropDownContainer" id="dropdown_division_via_new" style="display: none;">
                <input  type="text" class="multiplesFilter" placeholder="Type to filter" dd_id="division_via_new" >
                  <ul  >
                    <li style="display: block;" class="item_single_select" dd_id="division_via_new">
                      <span></span><span style="color:white"> : </span><span></span>
                    </li>
                    {% for division in division_list %}
                      <li style="display: block;" class="item_single_select" dd_id="division_via_new">
                        <span >{{ division.division_id }}</span><span > : </span><span>{{ division.division_name }}</span>
                      </li>
                    {% endfor %}
                  </ul>
              </div>
              {% else %}
                <input type="text"   hidden id="hidden_item_code_division_via_new">
                <input type="text" readonly placeholder="pass-through division: Empty"  style="width:100%" title="please insert pass-through division in static data tab" id="displayed_item_name_division_via_new">
              {% endif %}
          </div>

        </td>
      </tr>
      <tr>
        <td ><span style="width: 100%; margin-left:5px;">payment:</span></td>
        <td >
          <div style="width: 100%; margin-left:5px;">
            <select  style="width: 100% ; padding:2px" id="transaction_direction_new" >
              <option value="PAY"> PAY</option>
              <option value="REC"> REC</option>
            </select>
          </div>
        </td>
        <td>
          <!--Currency-->
          <div style="width: 100%; margin-left:5px;">
            {% if currency_list %}
              <div  class="comboTreeInputWrapper" dd_id="contract_currency_new">
                <input type="text"   class="justAnInputBox comboTreeInputBox" placeholder="Currency" readonly dd_id="contract_currency_new" id="displayed_item_name_contract_currency_new" >
                <input type="text"   hidden id="hidden_item_code_contract_currency_new">
              </div>
              <div  class="comboTreeDropDownContainer" id="dropdown_contract_currency_new" style="display: none;">
                <input  type="text" class="multiplesFilter" placeholder="Type to filter" dd_id="contract_currency_new" >
                  <ul  >
                    {% for currency in currency_list %}
                      <li style="display: block;" class="item_single_select" dd_id="contract_currency_new">
                        <span hidden>{{ currency.currency }}</span><span hidden> : </span><span>{{ currency.currency }}</span>
                      </li>
                    {% endfor %}
                  </ul>
              </div>
            {% else %}
              <input type="text" readonly placeholder="currency: Empty"  style="width:100%" title="please insert currencies in static data tab" id="displayed_item_name_contract_currency_new">
              <input type="text"   hidden id="hidden_item_code_contract_currency_new">
            {% endif %}
          </div>

        </td>
        <td>
          <!--periodicity-->
          <div style="width: 100%; margin-left:5px;">
            {% if periodicity_list %}
              <div  class="comboTreeInputWrapper" dd_id="periodicity_new">
                <input type="text"   class="justAnInputBox comboTreeInputBox" placeholder="Periodicity" readonly dd_id="periodicity_new" id="displayed_item_name_periodicity_new" >
                <input type="text"   hidden id="hidden_item_code_periodicity_new">
              </div>
              <div  class="comboTreeDropDownContainer" id="dropdown_periodicity_new" style="display: none;">
                <input  type="text" class="multiplesFilter" placeholder="Type to filter" dd_id="periodicity_new" >
                  <ul  >
                    {% for periodicity in periodicity_list %}
                      <li style="display: block;" class="item_single_select" dd_id="periodicity_new">
                        <span hidden>{{ periodicity.id }}</span><span hidden> : </span><span>{{ periodicity.periodicity }}</span>
                      </li>
                    {% endfor %}
                  </ul>
              </div>
            {% else %}
              <input type="text" readonly placeholder="Periodicity: Empty"  style="width:100%" title="please insert periodicity in static data tab" id="displayed_item_name_periodicity_new" >
              <input type="text"   hidden id="hidden_item_code_periodicity_new">
            {% endif %}
          </div>    
        </td>

        <td ><!--payment terms-->
          <input id="payment_terms_new" placeholder="nb days-payment terms"  type="number" min="0"  style="width: 100%; margin-left:5px;">
        </td>
      </tr>
      <tr>
        <td ><span style="width: 100%; margin-left:5px;">Minimum Guarantee (/year):</span></td>
        <td ><!--mini gar status-->
          <div   style="width: 100%; margin-left:5px;">
            <select  style="width: 100%; padding:2px"  id="mini_gar_status_new" onchange="hide_option()" >
              <option value="YES"> YES</option>
              <option value="NO" selected> NO</option>
            </select>
          </div>
        </td>
        <td class="mini_gar_option" hidden><!--amount-->
          <input class="number-separator" id="minimum_guar_amount_new" placeholder="amount"  type="text"  style="width: 100%; margin-left:5px;">
        </td>
      <!--Country List-->
        <td  class="comboTreeWrapper mini_gar_option" hidden>
          <div style="width: 100%; margin-left:5px;" >
            {% if country_list %}
              <div  class="comboTreeInputWrapper" dd_id="country_new">
                <input type="text"   class="justAnInputBox comboTreeInputBox" placeholder="Country" readonly dd_id="country_new" id="displayed_item_name_country_new" >
                <input type="text"   hidden id="hidden_item_code_country_new">
              </div>
              <div  class="comboTreeDropDownContainer" id="dropdown_country_new" style="display: none;">
                <input  type="text" class="multiplesFilter" placeholder="Type to filter" dd_id="country_new" >
                  <ul  >
                    <li style="display: block;" class="item_single_select" dd_id="country_new">
                      <span></span><span style="color:white"> : </span><span></span>
                    </li> 
                  {% for region in region_list %} 
                    <li  >
                      <span class="bi-arrow-down-circle comboTreeParentPlus" dd_id="country_new" region_id={{region.id}} ></span>
                      <span class="region" dd_id="country_new">{{region.region}}</span>
                      <ul style="display: block;" id="country_new_{{region.id}}">
                          {% for country in country_list %}
                            <li style="display: block;" class="item_single_select" dd_id="country_new">
                              <span>{{ country.country_id }}</span><span> : </span><span>{{ country.country }}</span>
                            </li>
                          {% endfor %}
                      </ul>
                    </li>
                  {% endfor %}
                    
                  </ul>
              </div>
            {% else %}
              <input type="text" readonly placeholder="Countries: Empty"  style="width:100%" title="please insert Countries in static data tab" id="displayed_item_name_country_new">
              <input type="text"   hidden id="hidden_item_code_country_new">
            {% endif %}
          </div>
        </td>
      </tr>
      <tr > 
        <td>

    
      <tr > <!--last row-->
        <td colspan="2">
          <div style="width: 100%; margin-left:5px;">
            <div id="message_save" style="color: green;" hidden > Item saved</div>
            <div id="message_error" style="color: red;" hidden > error: some fields are missing</div>
        </div>
        </td>
        <td></td>
        <td></td>
        <td >
          <div style="width: 100%; text-align: end; margin-left:5px;">
            <button class="btn btn-sm btn-outline-success" type="button" onclick="add_new_record()" title="save"><span class="bi bi-save2-fill"></span></button>
            <button class="btn btn-sm btn-outline-warning"  onclick="cancel_new_record()" type="reset" title="cancel"> <span class="bi bi-x-circle"></span></button>
          </div>
        </td>
      </tr>
    </table> 

  </form>
  
  <!------------------------------------------------------------------------------------->   
  <!---------------------------Contracts Table------------------------------------------->  
  


{% load static %}
  
    <link rel="stylesheet" href="{% static 'royalty_app/style.css'%}">
    <script src="{% static 'royalty_app/dropdown_single.js'%}"></script>
    <script src="{% static 'royalty_app/contract.js'%}"></script>
    <script src="{% static 'royalty_app/easy-number-separator.js'%}"></script>



 

{% endblock %}

